# æ’ä»¶æ•°æ®å­˜å‚¨å®ç°æŒ‡å—

æœ¬æ–‡æ¡£æä¾›äº†å®Œæ•´çš„æ’ä»¶æ•°æ®å­˜å‚¨æ–¹æ¡ˆå®ç°æŒ‡å—ï¼ŒåŒ…æ‹¬æ•°æ®åº“æ‰©å±•ã€æœåŠ¡å¼€å‘ã€APIå°è£…ã€æ’ä»¶é‡æ„å’Œæµ‹è¯•ä¼˜åŒ–ç­‰å„ä¸ªé˜¶æ®µçš„è¯¦ç»†æ­¥éª¤ã€‚

## ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
2. [æŠ€æœ¯æ¶æ„](#æŠ€æœ¯æ¶æ„)
3. [å®ç°é˜¶æ®µ](#å®ç°é˜¶æ®µ)
4. [æ–‡ä»¶ç»“æ„](#æ–‡ä»¶ç»“æ„)
5. [æ ¸å¿ƒç»„ä»¶è¯´æ˜](#æ ¸å¿ƒç»„ä»¶è¯´æ˜)
6. [å®ç°æ­¥éª¤](#å®ç°æ­¥éª¤)
7. [æµ‹è¯•éªŒè¯](#æµ‹è¯•éªŒè¯)
8. [éƒ¨ç½²ä¸Šçº¿](#éƒ¨ç½²ä¸Šçº¿)
9. [ç»´æŠ¤å’Œä¼˜åŒ–](#ç»´æŠ¤å’Œä¼˜åŒ–)
10. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

## é¡¹ç›®æ¦‚è¿°

### ç›®æ ‡

è®¾è®¡å¹¶å®ç°ä¸€å¥—å®Œæ•´çš„æ’ä»¶æ•°æ®å­˜å‚¨æ–¹æ¡ˆï¼Œä½¿è”ç³»äººæ’ä»¶å’Œæ¶ˆæ¯æ’ä»¶èƒ½å¤Ÿï¼š

1. **å…±äº«æ•°æ®**ï¼šä¸¤ä¸ªæ’ä»¶å…±ç”¨åŒä¸€ä»½è”ç³»äººæ•°æ®ç¼“å­˜
2. **ä¿ç•™åŠŸèƒ½**ï¼šä¿æŒåŸæœ‰é¡µé¢çš„æ‰€æœ‰äº¤äº’åŠŸèƒ½
3. **æ•°æ®åŒæ­¥**ï¼šå®ç°æ’ä»¶é—´çš„å®æ—¶æ•°æ®åŒæ­¥
4. **æ€§èƒ½ä¼˜åŒ–**ï¼šæä¾›é«˜æ•ˆçš„æ•°æ®è®¿é—®å’Œç¼“å­˜æœºåˆ¶
5. **å®‰å…¨æ§åˆ¶**ï¼šå®ç°å®Œå–„çš„æƒé™ç®¡ç†å’Œæ•°æ®éªŒè¯

### æ ¸å¿ƒç‰¹æ€§

- **ç»Ÿä¸€æ•°æ®å±‚**ï¼šåŸºäº SQLite çš„ç»Ÿä¸€æ•°æ®å­˜å‚¨
- **æ’ä»¶éš”ç¦»**ï¼šæ¯ä¸ªæ’ä»¶æœ‰ç‹¬ç«‹çš„æ•°æ®ç©ºé—´
- **å…±äº«æœºåˆ¶**ï¼šæ”¯æŒæ’ä»¶é—´çš„æ•°æ®å…±äº«
- **å®æ—¶åŒæ­¥**ï¼šåŸºäºäº‹ä»¶çš„æ•°æ®åŒæ­¥æœºåˆ¶
- **æƒé™æ§åˆ¶**ï¼šç»†ç²’åº¦çš„æ•°æ®è®¿é—®æƒé™ç®¡ç†
- **ç¼“å­˜ä¼˜åŒ–**ï¼šæ™ºèƒ½ç¼“å­˜ç­–ç•¥æå‡æ€§èƒ½

## æŠ€æœ¯æ¶æ„

### æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å‰ç«¯æ’ä»¶å±‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   è”ç³»äººæ’ä»¶          â”‚           æ¶ˆæ¯æ’ä»¶                     â”‚
â”‚                     â”‚                                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ContactList.vue â”‚ â”‚ â”‚ MessageList.vue                     â”‚ â”‚
â”‚ â”‚ ContactGroups   â”‚ â”‚ â”‚ ConversationList.vue                â”‚ â”‚
â”‚ â”‚ ContactDetail   â”‚ â”‚ â”‚ FileTransfer.vue                    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚          â”‚          â”‚                    â”‚                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ContactDataServiceâ”‚ â”‚ â”‚ MessageDataService                  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  å…±äº«æœåŠ¡å±‚                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   PluginDataAPI     â”‚        DataSyncService                â”‚
â”‚                     â”‚                                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ç§æœ‰æ•°æ®ç®¡ç†      â”‚ â”‚ â”‚ äº‹ä»¶è®¢é˜…/å‘å¸ƒ                        â”‚ â”‚
â”‚ â”‚ å…±äº«æ•°æ®ç®¡ç†      â”‚ â”‚ â”‚ æ•°æ®åŒæ­¥                            â”‚ â”‚
â”‚ â”‚ è”ç³»äººç®¡ç†        â”‚ â”‚ â”‚ ç¼“å­˜ç®¡ç†                            â”‚ â”‚
â”‚ â”‚ æ¶ˆæ¯ç®¡ç†          â”‚ â”‚ â”‚ ç»Ÿè®¡åˆ†æ                            â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ä¸»è¿›ç¨‹æœåŠ¡å±‚                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  PluginDataService  â”‚       PluginPermissionManager         â”‚
â”‚                     â”‚                                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ æ•°æ®CRUDæ“ä½œ     â”‚ â”‚ â”‚ æƒé™æ£€æŸ¥                            â”‚ â”‚
â”‚ â”‚ äº‹åŠ¡ç®¡ç†          â”‚ â”‚ â”‚ æƒé™è®¾ç½®                            â”‚ â”‚
â”‚ â”‚ ç¼“å­˜ç®¡ç†          â”‚ â”‚ â”‚ æ•°æ®éªŒè¯                            â”‚ â”‚
â”‚ â”‚ æ€§èƒ½ä¼˜åŒ–          â”‚ â”‚ â”‚ å®‰å…¨æ§åˆ¶                            â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   æ•°æ®å­˜å‚¨å±‚                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    SQLite æ•°æ®åº“     â”‚           æ–‡ä»¶ç³»ç»Ÿ                     â”‚
â”‚                     â”‚                                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ æ’ä»¶æ•°æ®è¡¨        â”‚ â”‚ â”‚ é™„ä»¶æ–‡ä»¶                            â”‚ â”‚
â”‚ â”‚ å…±äº«æ•°æ®è¡¨        â”‚ â”‚ â”‚ ç¼“å­˜æ–‡ä»¶                            â”‚ â”‚
â”‚ â”‚ è”ç³»äººæ•°æ®è¡¨      â”‚ â”‚ â”‚ æ—¥å¿—æ–‡ä»¶                            â”‚ â”‚
â”‚ â”‚ æ¶ˆæ¯æ•°æ®è¡¨        â”‚ â”‚ â”‚ é…ç½®æ–‡ä»¶                            â”‚ â”‚
â”‚ â”‚ æƒé™é…ç½®è¡¨        â”‚ â”‚ â”‚                                     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµå‘

```
ç”¨æˆ·æ“ä½œ â†’ æ’ä»¶ç»„ä»¶ â†’ æ•°æ®æœåŠ¡ â†’ APIå±‚ â†’ IPCé€šä¿¡ â†’ ä¸»è¿›ç¨‹æœåŠ¡ â†’ æ•°æ®åº“
                                                    â†“
äº‹ä»¶é€šçŸ¥ â† åŒæ­¥æœåŠ¡ â† APIå±‚ â† IPCé€šä¿¡ â† ä¸»è¿›ç¨‹æœåŠ¡ â† æ•°æ®åº“
```

## å®ç°é˜¶æ®µ

### é˜¶æ®µä¸€ï¼šæ•°æ®åº“æ‰©å±•ï¼ˆå·²å®Œæˆï¼‰

**ç›®æ ‡**ï¼šæ‰©å±•ç°æœ‰ SQLite æ•°æ®åº“ï¼Œæ”¯æŒæ’ä»¶æ•°æ®å­˜å‚¨

**å®Œæˆçš„å·¥ä½œ**ï¼š

- âœ… åˆ›å»ºæ’ä»¶æ•°æ®è¡¨ç»“æ„
- âœ… è®¾è®¡å…±äº«æ•°æ®æœºåˆ¶
- âœ… æ·»åŠ æƒé™æ§åˆ¶è¡¨
- âœ… åˆ›å»ºç´¢å¼•å’Œè§¦å‘å™¨
- âœ… è®¾è®¡æ•°æ®è§†å›¾

**æ–‡ä»¶**ï¼š

- `src/main/services/database/plugin-schema.sql`

### é˜¶æ®µäºŒï¼šä¸»è¿›ç¨‹æœåŠ¡å¼€å‘ï¼ˆå·²å®Œæˆï¼‰

**ç›®æ ‡**ï¼šå¼€å‘ä¸»è¿›ç¨‹ä¸­çš„æ•°æ®æœåŠ¡å’Œæƒé™ç®¡ç†

**å®Œæˆçš„å·¥ä½œ**ï¼š

- âœ… å®ç° PluginDataService
- âœ… å®ç° PluginPermissionManager
- âœ… å®ç° DataValidator
- âœ… å®ç° PluginDataIPC

**æ–‡ä»¶**ï¼š

- `src/main/services/plugin/PluginDataService.ts`
- `src/main/services/plugin/PluginPermissionManager.ts`
- `src/main/services/plugin/DataValidator.ts`
- `src/main/services/plugin/PluginDataIPC.ts`

### é˜¶æ®µä¸‰ï¼šå‰ç«¯APIå°è£…ï¼ˆå·²å®Œæˆï¼‰

**ç›®æ ‡**ï¼šä¸ºæ’ä»¶æä¾›ç»Ÿä¸€çš„æ•°æ®è®¿é—®API

**å®Œæˆçš„å·¥ä½œ**ï¼š

- âœ… å®ç° PluginDataAPI
- âœ… å®ç° DataSyncService
- âœ… åˆ›å»ºæ’ä»¶æ•°æ®æœåŠ¡ç¤ºä¾‹

**æ–‡ä»¶**ï¼š

- `src/renderer/src/services/plugin/PluginDataAPI.ts`
- `plugins/shared/services/DataSyncService.ts`
- `plugins/contact-plugin/src/services/ContactDataService.ts`
- `plugins/message-plugin/src/services/MessageDataService.ts`

### é˜¶æ®µå››ï¼šæ’ä»¶é‡æ„ï¼ˆå¾…å®ç°ï¼‰

**ç›®æ ‡**ï¼šé‡æ„è”ç³»äººå’Œæ¶ˆæ¯æ’ä»¶ï¼Œä½¿ç”¨æ–°çš„æ•°æ®æœåŠ¡

**éœ€è¦å®Œæˆçš„å·¥ä½œ**ï¼š

- ğŸ”„ é‡æ„è”ç³»äººæ’ä»¶ç»„ä»¶
- ğŸ”„ é‡æ„æ¶ˆæ¯æ’ä»¶ç»„ä»¶
- ğŸ”„ å®ç°æ•°æ®è¿ç§»è„šæœ¬
- ğŸ”„ æ›´æ–°æ’ä»¶é…ç½®

### é˜¶æ®µäº”ï¼šæµ‹è¯•å’Œä¼˜åŒ–ï¼ˆå¾…å®ç°ï¼‰

**ç›®æ ‡**ï¼šå…¨é¢æµ‹è¯•ç³»ç»ŸåŠŸèƒ½ï¼Œä¼˜åŒ–æ€§èƒ½

**éœ€è¦å®Œæˆçš„å·¥ä½œ**ï¼š

- ğŸ”„ å•å…ƒæµ‹è¯•
- ğŸ”„ é›†æˆæµ‹è¯•
- ğŸ”„ æ€§èƒ½æµ‹è¯•
- ğŸ”„ ç”¨æˆ·ä½“éªŒæµ‹è¯•

## æ–‡ä»¶ç»“æ„

```
why-talk/
â”œâ”€â”€ doc/
â”‚   â”œâ”€â”€ æ’ä»¶æ•°æ®å­˜å‚¨è®¾è®¡æ–¹æ¡ˆ.md          # è®¾è®¡æ–‡æ¡£
â”‚   â”œâ”€â”€ æ’ä»¶æ•°æ®æœåŠ¡ä½¿ç”¨ç¤ºä¾‹.md          # ä½¿ç”¨ç¤ºä¾‹
â”‚   â””â”€â”€ æ’ä»¶æ•°æ®å­˜å‚¨å®ç°æŒ‡å—.md          # å®ç°æŒ‡å—ï¼ˆæœ¬æ–‡æ¡£ï¼‰
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â””â”€â”€ services/
â”‚   â”‚       â”œâ”€â”€ database/
â”‚   â”‚       â”‚   â””â”€â”€ plugin-schema.sql   # æ•°æ®åº“æ‰©å±•è„šæœ¬
â”‚   â”‚       â””â”€â”€ plugin/
â”‚   â”‚           â”œâ”€â”€ PluginDataService.ts      # ä¸»è¿›ç¨‹æ•°æ®æœåŠ¡
â”‚   â”‚           â”œâ”€â”€ PluginPermissionManager.ts # æƒé™ç®¡ç†
â”‚   â”‚           â”œâ”€â”€ DataValidator.ts          # æ•°æ®éªŒè¯
â”‚   â”‚           â””â”€â”€ PluginDataIPC.ts          # IPCé€šä¿¡
â”‚   â”‚
â”‚   â””â”€â”€ renderer/
â”‚       â””â”€â”€ src/
â”‚           â””â”€â”€ services/
â”‚               â””â”€â”€ plugin/
â”‚                   â””â”€â”€ PluginDataAPI.ts      # å‰ç«¯APIå°è£…
â”‚
â””â”€â”€ plugins/
    â”œâ”€â”€ shared/
    â”‚   â””â”€â”€ services/
    â”‚       â””â”€â”€ DataSyncService.ts              # æ•°æ®åŒæ­¥æœåŠ¡
    â”‚
    â”œâ”€â”€ contact-plugin/
    â”‚   â””â”€â”€ src/
    â”‚       â””â”€â”€ services/
    â”‚           â””â”€â”€ ContactDataService.ts       # è”ç³»äººæ•°æ®æœåŠ¡
    â”‚
    â””â”€â”€ message-plugin/
        â””â”€â”€ src/
            â””â”€â”€ services/
                â””â”€â”€ MessageDataService.ts       # æ¶ˆæ¯æ•°æ®æœåŠ¡
```

## æ ¸å¿ƒç»„ä»¶è¯´æ˜

### 1. PluginDataServiceï¼ˆä¸»è¿›ç¨‹æ•°æ®æœåŠ¡ï¼‰

**èŒè´£**ï¼š

- æä¾›ç»Ÿä¸€çš„æ•°æ®è®¿é—®æ¥å£
- ç®¡ç†æ•°æ®åº“è¿æ¥å’Œäº‹åŠ¡
- å®ç°æ•°æ®ç¼“å­˜å’Œä¼˜åŒ–
- å¤„ç†æ•°æ®åºåˆ—åŒ–/ååºåˆ—åŒ–

**æ ¸å¿ƒæ–¹æ³•**ï¼š

```typescript
// ç§æœ‰æ•°æ®ç®¡ç†
setPluginData(pluginId: string, key: string, value: any): Promise<boolean>
getPluginData(pluginId: string, key: string): Promise<any>
deletePluginData(pluginId: string, key: string): Promise<boolean>
listPluginData(pluginId: string): Promise<Array<{key: string, value: any}>>

// å…±äº«æ•°æ®ç®¡ç†
setSharedData(namespace: string, key: string, value: any, pluginId: string): Promise<boolean>
getSharedData(namespace: string, key: string): Promise<any>
deleteSharedData(namespace: string, key: string, pluginId: string): Promise<boolean>
listSharedData(namespace: string): Promise<Array<{key: string, value: any}>>

// è”ç³»äººç®¡ç†
getContacts(options?: ContactQueryOptions): Promise<Contact[]>
getContact(contactId: number): Promise<Contact | null>
updateContact(contactId: number, updates: Partial<Contact>): Promise<boolean>
addContact(contactData: ContactData): Promise<Contact | null>
deleteContact(contactId: number): Promise<boolean>
pinContact(contactId: number, pinned: boolean): Promise<boolean>

// æ¶ˆæ¯ç®¡ç†
getMessages(conversationId: number, options?: MessageQueryOptions): Promise<Message[]>
sendMessage(messageData: MessageData): Promise<Message | null>
markMessageAsRead(messageId: number): Promise<boolean>
```

### 2. PluginPermissionManagerï¼ˆæƒé™ç®¡ç†ï¼‰

**èŒè´£**ï¼š

- ç®¡ç†æ’ä»¶æƒé™é…ç½®
- éªŒè¯æ•°æ®è®¿é—®æƒé™
- æ§åˆ¶APIè°ƒç”¨æƒé™
- è®°å½•æƒé™ä½¿ç”¨æƒ…å†µ

**æ ¸å¿ƒæ–¹æ³•**ï¼š

```typescript
checkPermission(pluginId: string, permission: string): Promise<boolean>
setPermission(pluginId: string, permission: string, granted: boolean): Promise<boolean>
validateDataAccess(pluginId: string, operation: string, data: any): Promise<boolean>
validateApiAccess(pluginId: string, apiName: string): Promise<boolean>
```

### 3. PluginDataAPIï¼ˆå‰ç«¯APIå°è£…ï¼‰

**èŒè´£**ï¼š

- å°è£…IPCé€šä¿¡ç»†èŠ‚
- æä¾›ç±»å‹å®‰å…¨çš„API
- å®ç°å®¢æˆ·ç«¯ç¼“å­˜
- å¤„ç†é”™è¯¯å’Œé‡è¯•

**æ ¸å¿ƒæ–¹æ³•**ï¼š

```typescript
// ç§æœ‰æ•°æ®
setData(key: string, value: any): Promise<boolean>
getData(key: string): Promise<any>
deleteData(key: string): Promise<boolean>
listData(): Promise<Array<{key: string, value: any}>>

// å…±äº«æ•°æ®
setSharedData(namespace: string, key: string, value: any): Promise<boolean>
getSharedData(namespace: string, key: string): Promise<any>
deleteSharedData(namespace: string, key: string): Promise<boolean>
listSharedData(namespace: string): Promise<Array<{key: string, value: any}>>

// è”ç³»äººç®¡ç†
getContacts(options?: any): Promise<any[]>
getContact(contactId: number): Promise<any>
updateContact(contactId: number, updates: any): Promise<boolean>
addContact(contactData: any): Promise<any>
deleteContact(contactId: number): Promise<boolean>
pinContact(contactId: number, pinned: boolean): Promise<boolean>

// æ¶ˆæ¯ç®¡ç†
getMessages(conversationId: number, options?: any): Promise<any[]>
sendMessage(messageData: any): Promise<any>
markMessageAsRead(messageId: number): Promise<boolean>
```

### 4. DataSyncServiceï¼ˆæ•°æ®åŒæ­¥æœåŠ¡ï¼‰

**èŒè´£**ï¼š

- ç®¡ç†æ’ä»¶é—´çš„æ•°æ®åŒæ­¥
- æä¾›äº‹ä»¶è®¢é˜…/å‘å¸ƒæœºåˆ¶
- å¤„ç†æ•°æ®å†²çªå’Œåˆå¹¶
- ç»´æŠ¤åŒæ­¥çŠ¶æ€

**æ ¸å¿ƒæ–¹æ³•**ï¼š

```typescript
subscribe(eventType: string, callback: (event: SyncEvent) => void): () => void
unsubscribe(eventType: string, callback: (event: SyncEvent) => void): void
publish(event: SyncEvent): Promise<void>
syncContacts(contacts: Contact[], sourcePlugin: string): Promise<void>
getSharedContacts(): Promise<Contact[]>
forceSyncAll(): Promise<void>
```

## å®ç°æ­¥éª¤

### æ­¥éª¤1ï¼šé›†æˆæ•°æ®åº“æ‰©å±•

1. **ä¿®æ”¹æ•°æ®åº“åˆå§‹åŒ–ä»£ç **

```typescript
// src/main/services/database/Database.ts
import fs from 'fs'
import path from 'path'

class DatabaseManager {
  async initialize() {
    // æ‰§è¡ŒåŸæœ‰çš„ schema.sql
    const schemaPath = path.join(__dirname, 'schema.sql')
    const schema = fs.readFileSync(schemaPath, 'utf8')
    await this.db.exec(schema)

    // æ‰§è¡Œæ’ä»¶æ‰©å±• schema
    const pluginSchemaPath = path.join(__dirname, 'plugin-schema.sql')
    if (fs.existsSync(pluginSchemaPath)) {
      const pluginSchema = fs.readFileSync(pluginSchemaPath, 'utf8')
      await this.db.exec(pluginSchema)
      console.log('æ’ä»¶æ•°æ®åº“æ‰©å±•åˆå§‹åŒ–å®Œæˆ')
    }
  }
}
```

2. **æ³¨å†ŒIPCå¤„ç†å™¨**

```typescript
// src/main/main.ts
import { PluginDataIPC } from './services/plugin/PluginDataIPC'

class MainProcess {
  async initialize() {
    // åˆå§‹åŒ–æ•°æ®åº“
    await DatabaseManager.getInstance().initialize()

    // æ³¨å†Œæ’ä»¶æ•°æ®IPCå¤„ç†å™¨
    const pluginDataIPC = new PluginDataIPC()
    await pluginDataIPC.initialize()

    console.log('ä¸»è¿›ç¨‹åˆå§‹åŒ–å®Œæˆ')
  }
}
```

### æ­¥éª¤2ï¼šåˆ›å»ºæ’ä»¶é¡¹ç›®ç»“æ„

1. **åˆ›å»ºè”ç³»äººæ’ä»¶ç›®å½•**

```bash
mkdir -p plugins/contact-plugin/src/{components,services,types,utils}
mkdir -p plugins/contact-plugin/src/components/{contact,group,search}
```

2. **åˆ›å»ºæ¶ˆæ¯æ’ä»¶ç›®å½•**

```bash
mkdir -p plugins/message-plugin/src/{components,services,types,utils}
mkdir -p plugins/message-plugin/src/components/{message,conversation,file}
```

3. **åˆ›å»ºå…±äº«æœåŠ¡ç›®å½•**

```bash
mkdir -p plugins/shared/{services,types,utils,components}
```

### æ­¥éª¤3ï¼šå®ç°è”ç³»äººæ’ä»¶ç»„ä»¶

1. **åˆ›å»ºè”ç³»äººåˆ—è¡¨ç»„ä»¶**

```typescript
// plugins/contact-plugin/src/components/contact/ContactList.vue
<template>
  <div class="contact-list">
    <!-- æœç´¢æ  -->
    <div class="search-bar">
      <el-input
        v-model="searchKeyword"
        placeholder="æœç´¢è”ç³»äºº"
        @input="debouncedSearch"
        clearable
      >
        <template #prefix>
          <el-icon><Search /></el-icon>
        </template>
      </el-input>
    </div>

    <!-- åˆ†ç»„ç­›é€‰ -->
    <div class="group-filter">
      <el-radio-group v-model="selectedGroupId" @change="filterByGroup">
        <el-radio-button :label="null">å…¨éƒ¨</el-radio-button>
        <el-radio-button
          v-for="group in groups"
          :key="group.id"
          :label="group.id"
        >
          {{ group.name }}
        </el-radio-button>
      </el-radio-group>
    </div>

    <!-- è”ç³»äººåˆ—è¡¨ -->
    <div class="contact-items" v-loading="loading">
      <div
        v-for="contact in filteredContacts"
        :key="contact.id"
        class="contact-item"
        :class="{ pinned: contact.is_pinned }"
        @click="selectContact(contact)"
      >
        <!-- å¤´åƒ -->
        <div class="avatar">
          <el-avatar :src="contact.avatar" :size="40">
            {{ contact.nickname?.[0] || contact.remark?.[0] || '?' }}
          </el-avatar>
          <div v-if="contact.is_pinned" class="pin-icon">
            <el-icon><Star /></el-icon>
          </div>
        </div>

        <!-- ä¿¡æ¯ -->
        <div class="info">
          <div class="name">
            {{ contact.nickname || contact.remark || contact.user_id }}
          </div>
          <div class="status">
            <span class="status-dot" :class="contact.status"></span>
            {{ getStatusText(contact.status) }}
          </div>
        </div>

        <!-- æ“ä½œæŒ‰é’® -->
        <div class="actions">
          <el-dropdown @command="handleAction">
            <el-button type="text" size="small">
              <el-icon><MoreFilled /></el-icon>
            </el-button>
            <template #dropdown>
              <el-dropdown-menu>
                <el-dropdown-item :command="{ action: 'pin', contact }">
                  {{ contact.is_pinned ? 'å–æ¶ˆç½®é¡¶' : 'ç½®é¡¶' }}
                </el-dropdown-item>
                <el-dropdown-item :command="{ action: 'edit', contact }">
                  ç¼–è¾‘
                </el-dropdown-item>
                <el-dropdown-item :command="{ action: 'delete', contact }" divided>
                  åˆ é™¤
                </el-dropdown-item>
              </el-dropdown-menu>
            </template>
          </el-dropdown>
        </div>
      </div>
    </div>

    <!-- æ·»åŠ æŒ‰é’® -->
    <div class="add-button">
      <el-button type="primary" @click="showAddDialog = true">
        <el-icon><Plus /></el-icon>
        æ·»åŠ è”ç³»äºº
      </el-button>
    </div>

    <!-- æ·»åŠ è”ç³»äººå¯¹è¯æ¡† -->
    <ContactAddDialog
      v-model="showAddDialog"
      :groups="groups"
      @confirm="addContact"
    />
  </div>
</template>

<script setup lang="ts">
// ç»„ä»¶å®ç°ä»£ç ï¼ˆå‚è€ƒä½¿ç”¨ç¤ºä¾‹æ–‡æ¡£ï¼‰
</script>
```

2. **åˆ›å»ºè”ç³»äººè¯¦æƒ…ç»„ä»¶**

```typescript
// plugins/contact-plugin/src/components/contact/ContactDetail.vue
<template>
  <div class="contact-detail" v-if="contact">
    <!-- å¤´éƒ¨ä¿¡æ¯ -->
    <div class="header">
      <el-avatar :src="contact.avatar" :size="80">
        {{ contact.nickname?.[0] || contact.remark?.[0] || '?' }}
      </el-avatar>
      <div class="info">
        <h3>{{ contact.nickname || contact.remark || contact.user_id }}</h3>
        <p class="status">
          <span class="status-dot" :class="contact.status"></span>
          {{ getStatusText(contact.status) }}
        </p>
      </div>
      <div class="actions">
        <el-button @click="startChat">å‘æ¶ˆæ¯</el-button>
        <el-button @click="editContact">ç¼–è¾‘</el-button>
      </div>
    </div>

    <!-- è¯¦ç»†ä¿¡æ¯ -->
    <div class="details">
      <el-descriptions :column="1" border>
        <el-descriptions-item label="ç”¨æˆ·ID">
          {{ contact.user_id }}
        </el-descriptions-item>
        <el-descriptions-item label="æ˜µç§°">
          {{ contact.nickname || 'æœªè®¾ç½®' }}
        </el-descriptions-item>
        <el-descriptions-item label="å¤‡æ³¨">
          {{ contact.remark || 'æœªè®¾ç½®' }}
        </el-descriptions-item>
        <el-descriptions-item label="åˆ†ç»„">
          {{ contact.group?.name || 'é»˜è®¤åˆ†ç»„' }}
        </el-descriptions-item>
        <el-descriptions-item label="æ ‡ç­¾">
          <el-tag
            v-for="tag in contact.tags"
            :key="tag"
            size="small"
            style="margin-right: 8px;"
          >
            {{ tag }}
          </el-tag>
          <span v-if="!contact.tags?.length">æ— æ ‡ç­¾</span>
        </el-descriptions-item>
        <el-descriptions-item label="å¤‡æ³¨">
          {{ contact.notes || 'æ— å¤‡æ³¨' }}
        </el-descriptions-item>
        <el-descriptions-item label="æ·»åŠ æ—¶é—´">
          {{ formatDate(contact.created_at) }}
        </el-descriptions-item>
        <el-descriptions-item label="æœ€åæ›´æ–°">
          {{ formatDate(contact.updated_at) }}
        </el-descriptions-item>
      </el-descriptions>
    </div>
  </div>
</template>

<script setup lang="ts">
// ç»„ä»¶å®ç°ä»£ç 
</script>
```

### æ­¥éª¤4ï¼šå®ç°æ¶ˆæ¯æ’ä»¶ç»„ä»¶

1. **åˆ›å»ºæ¶ˆæ¯åˆ—è¡¨ç»„ä»¶**

```typescript
// plugins/message-plugin/src/components/message/MessageList.vue
<template>
  <div class="message-list">
    <!-- æ¶ˆæ¯å¤´éƒ¨ -->
    <div class="header" v-if="conversation">
      <div class="conversation-info">
        <el-avatar :src="getConversationAvatar()" :size="40">
          {{ getConversationName()?.[0] || '?' }}
        </el-avatar>
        <div class="info">
          <h4>{{ getConversationName() }}</h4>
          <p class="status">{{ getConversationStatus() }}</p>
        </div>
      </div>
      <div class="actions">
        <el-button @click="showFileTransfer = true">
          <el-icon><Folder /></el-icon>
          æ–‡ä»¶
        </el-button>
        <el-button @click="showConversationInfo = true">
          <el-icon><InfoFilled /></el-icon>
          è¯¦æƒ…
        </el-button>
      </div>
    </div>

    <!-- æ¶ˆæ¯å†…å®¹åŒº -->
    <div class="message-content" ref="messageContainer">
      <!-- åŠ è½½æ›´å¤šæŒ‰é’® -->
      <div class="load-more" v-if="hasMore">
        <el-button @click="loadMoreMessages" :loading="loading">
          åŠ è½½æ›´å¤šæ¶ˆæ¯
        </el-button>
      </div>

      <!-- æ¶ˆæ¯åˆ—è¡¨ -->
      <div class="messages">
        <div
          v-for="message in messages"
          :key="message.id"
          class="message-item"
          :class="{
            'own-message': message.sender_id === currentUserId,
            'system-message': message.message_type === 'system'
          }"
        >
          <!-- æ¶ˆæ¯æ—¶é—´ -->
          <div class="message-time" v-if="shouldShowTime(message)">
            {{ formatMessageTime(message.created_at) }}
          </div>

          <!-- æ¶ˆæ¯å†…å®¹ -->
          <div class="message-bubble">
            <!-- å‘é€è€…å¤´åƒï¼ˆç¾¤èŠæ—¶æ˜¾ç¤ºï¼‰ -->
            <div class="sender-avatar" v-if="!isOwnMessage(message) && isGroupChat">
              <el-avatar :src="message.sender?.avatar" :size="32">
                {{ message.sender?.nickname?.[0] || '?' }}
              </el-avatar>
            </div>

            <!-- æ¶ˆæ¯ä¸»ä½“ -->
            <div class="message-body">
              <!-- å‘é€è€…åç§°ï¼ˆç¾¤èŠæ—¶æ˜¾ç¤ºï¼‰ -->
              <div class="sender-name" v-if="!isOwnMessage(message) && isGroupChat">
                {{ message.sender?.nickname || message.sender?.user_id }}
              </div>

              <!-- æ¶ˆæ¯å†…å®¹ -->
              <div class="message-content-wrapper">
                <!-- æ–‡æœ¬æ¶ˆæ¯ -->
                <div v-if="message.message_type === 'text'" class="text-message">
                  {{ message.content }}
                </div>

                <!-- å›¾ç‰‡æ¶ˆæ¯ -->
                <div v-else-if="message.message_type === 'image'" class="image-message">
                  <el-image
                    :src="getImageUrl(message)"
                    :preview-src-list="[getImageUrl(message)]"
                    fit="cover"
                    style="max-width: 200px; max-height: 200px;"
                  />
                </div>

                <!-- æ–‡ä»¶æ¶ˆæ¯ -->
                <div v-else-if="message.message_type === 'file'" class="file-message">
                  <div class="file-info" @click="downloadFile(message)">
                    <el-icon><Document /></el-icon>
                    <div class="file-details">
                      <div class="file-name">{{ getFileName(message) }}</div>
                      <div class="file-size">{{ formatFileSize(getFileSize(message)) }}</div>
                    </div>
                  </div>
                </div>

                <!-- ç³»ç»Ÿæ¶ˆæ¯ -->
                <div v-else-if="message.message_type === 'system'" class="system-message">
                  {{ message.content }}
                </div>
              </div>

              <!-- æ¶ˆæ¯çŠ¶æ€å’Œæ“ä½œ -->
              <div class="message-meta">
                <span class="message-status">
                  {{ getMessageStatus(message) }}
                </span>
                <el-dropdown @command="handleMessageAction">
                  <el-button type="text" size="small">
                    <el-icon><MoreFilled /></el-icon>
                  </el-button>
                  <template #dropdown>
                    <el-dropdown-menu>
                      <el-dropdown-item :command="{ action: 'copy', message }">
                        å¤åˆ¶
                      </el-dropdown-item>
                      <el-dropdown-item :command="{ action: 'reply', message }">
                        å›å¤
                      </el-dropdown-item>
                      <el-dropdown-item
                        v-if="canRecall(message)"
                        :command="{ action: 'recall', message }"
                      >
                        æ’¤å›
                      </el-dropdown-item>
                      <el-dropdown-item
                        :command="{ action: 'delete', message }"
                        divided
                      >
                        åˆ é™¤
                      </el-dropdown-item>
                    </el-dropdown-menu>
                  </template>
                </el-dropdown>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- æ¶ˆæ¯è¾“å…¥åŒº -->
    <div class="message-input">
      <MessageEditor
        @send="sendMessage"
        @file-upload="handleFileUpload"
        :disabled="!conversation"
      />
    </div>

    <!-- æ–‡ä»¶ä¼ è¾“å¯¹è¯æ¡† -->
    <FileTransferDialog
      v-model="showFileTransfer"
      :conversation-id="conversationId"
    />

    <!-- ä¼šè¯ä¿¡æ¯å¯¹è¯æ¡† -->
    <ConversationInfoDialog
      v-model="showConversationInfo"
      :conversation="conversation"
    />
  </div>
</template>

<script setup lang="ts">
// ç»„ä»¶å®ç°ä»£ç ï¼ˆå‚è€ƒä½¿ç”¨ç¤ºä¾‹æ–‡æ¡£ï¼‰
</script>
```

### æ­¥éª¤5ï¼šæ•°æ®è¿ç§»

1. **åˆ›å»ºæ•°æ®è¿ç§»è„šæœ¬**

```typescript
// scripts/migrate-plugin-data.ts
import { DatabaseManager } from '../src/main/services/database/Database'
import { PluginDataService } from '../src/main/services/plugin/PluginDataService'

class DataMigration {
  private db: DatabaseManager
  private pluginDataService: PluginDataService

  constructor() {
    this.db = DatabaseManager.getInstance()
    this.pluginDataService = new PluginDataService()
  }

  async migrateContacts() {
    console.log('å¼€å§‹è¿ç§»è”ç³»äººæ•°æ®...')

    // ä»åŸæœ‰çš„è”ç³»äººè¡¨è¯»å–æ•°æ®
    const contacts = await this.db
      .prepare(
        `
      SELECT * FROM contacts ORDER BY created_at
    `
      )
      .all()

    console.log(`æ‰¾åˆ° ${contacts.length} ä¸ªè”ç³»äºº`)

    // è¿ç§»åˆ°æ–°çš„æ’ä»¶æ•°æ®ç»“æ„
    for (const contact of contacts) {
      try {
        // æ·»åŠ åˆ°è”ç³»äººè¡¨ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
        await this.pluginDataService.addContact({
          user_id: contact.user_id,
          nickname: contact.nickname,
          remark: contact.remark,
          avatar: contact.avatar,
          status: contact.status || 'offline',
          group_id: contact.group_id || 1,
          is_pinned: contact.is_pinned || false,
          tags: contact.tags ? JSON.parse(contact.tags) : [],
          notes: contact.notes || '',
          created_at: contact.created_at,
          updated_at: contact.updated_at
        })

        console.log(`è¿ç§»è”ç³»äºº: ${contact.nickname || contact.user_id}`)
      } catch (error) {
        console.error(`è¿ç§»è”ç³»äººå¤±è´¥: ${contact.user_id}`, error)
      }
    }

    console.log('è”ç³»äººæ•°æ®è¿ç§»å®Œæˆ')
  }

  async migrateMessages() {
    console.log('å¼€å§‹è¿ç§»æ¶ˆæ¯æ•°æ®...')

    // ä»åŸæœ‰çš„æ¶ˆæ¯è¡¨è¯»å–æ•°æ®
    const messages = await this.db
      .prepare(
        `
      SELECT * FROM messages ORDER BY created_at
    `
      )
      .all()

    console.log(`æ‰¾åˆ° ${messages.length} æ¡æ¶ˆæ¯`)

    // è¿ç§»åˆ°æ–°çš„æ’ä»¶æ•°æ®ç»“æ„
    for (const message of messages) {
      try {
        // ç¡®ä¿ä¼šè¯å­˜åœ¨
        let conversation = await this.pluginDataService.getConversation(message.conversation_id)
        if (!conversation) {
          // åˆ›å»ºä¼šè¯
          conversation = await this.pluginDataService.createConversation({
            conversation_type: message.conversation_type || 'private',
            participants: [message.sender_id, message.receiver_id].filter(Boolean),
            title: message.conversation_title || '',
            created_at: message.created_at
          })
        }

        // æ·»åŠ æ¶ˆæ¯
        await this.pluginDataService.sendMessage({
          conversation_id: conversation.id,
          sender_id: message.sender_id,
          receiver_id: message.receiver_id,
          content: message.content,
          message_type: message.message_type || 'text',
          attachments: message.attachments ? JSON.parse(message.attachments) : [],
          created_at: message.created_at
        })

        console.log(`è¿ç§»æ¶ˆæ¯: ${message.id}`)
      } catch (error) {
        console.error(`è¿ç§»æ¶ˆæ¯å¤±è´¥: ${message.id}`, error)
      }
    }

    console.log('æ¶ˆæ¯æ•°æ®è¿ç§»å®Œæˆ')
  }

  async run() {
    try {
      await this.db.initialize()
      await this.pluginDataService.initialize()

      await this.migrateContacts()
      await this.migrateMessages()

      console.log('æ•°æ®è¿ç§»å®Œæˆ')
    } catch (error) {
      console.error('æ•°æ®è¿ç§»å¤±è´¥:', error)
    }
  }
}

// è¿è¡Œè¿ç§»
if (require.main === module) {
  const migration = new DataMigration()
  migration.run()
}
```

2. **è¿è¡Œè¿ç§»è„šæœ¬**

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ
npx ts-node scripts/migrate-plugin-data.ts
```

## æµ‹è¯•éªŒè¯

### 1. å•å…ƒæµ‹è¯•

```typescript
// tests/unit/PluginDataService.test.ts
import { PluginDataService } from '../../src/main/services/plugin/PluginDataService'
import { DatabaseManager } from '../../src/main/services/database/Database'

describe('PluginDataService', () => {
  let service: PluginDataService
  let db: DatabaseManager

  beforeEach(async () => {
    db = DatabaseManager.getInstance()
    await db.initialize()
    service = new PluginDataService()
    await service.initialize()
  })

  afterEach(async () => {
    await db.close()
  })

  describe('æ’ä»¶ç§æœ‰æ•°æ®', () => {
    test('åº”è¯¥èƒ½å¤Ÿè®¾ç½®å’Œè·å–æ’ä»¶æ•°æ®', async () => {
      const pluginId = 'test-plugin'
      const key = 'test-key'
      const value = { name: 'test', count: 123 }

      // è®¾ç½®æ•°æ®
      const setResult = await service.setPluginData(pluginId, key, value)
      expect(setResult).toBe(true)

      // è·å–æ•°æ®
      const getData = await service.getPluginData(pluginId, key)
      expect(getData).toEqual(value)
    })

    test('åº”è¯¥èƒ½å¤Ÿåˆ é™¤æ’ä»¶æ•°æ®', async () => {
      const pluginId = 'test-plugin'
      const key = 'test-key'
      const value = 'test-value'

      // è®¾ç½®æ•°æ®
      await service.setPluginData(pluginId, key, value)

      // åˆ é™¤æ•°æ®
      const deleteResult = await service.deletePluginData(pluginId, key)
      expect(deleteResult).toBe(true)

      // éªŒè¯æ•°æ®å·²åˆ é™¤
      const getData = await service.getPluginData(pluginId, key)
      expect(getData).toBeNull()
    })
  })

  describe('å…±äº«æ•°æ®', () => {
    test('åº”è¯¥èƒ½å¤Ÿè®¾ç½®å’Œè·å–å…±äº«æ•°æ®', async () => {
      const namespace = 'contacts'
      const key = 'user-123'
      const value = { name: 'John', email: 'john@example.com' }
      const pluginId = 'test-plugin'

      // è®¾ç½®å…±äº«æ•°æ®
      const setResult = await service.setSharedData(namespace, key, value, pluginId)
      expect(setResult).toBe(true)

      // è·å–å…±äº«æ•°æ®
      const getData = await service.getSharedData(namespace, key)
      expect(getData).toEqual(value)
    })
  })

  describe('è”ç³»äººç®¡ç†', () => {
    test('åº”è¯¥èƒ½å¤Ÿæ·»åŠ å’Œè·å–è”ç³»äºº', async () => {
      const contactData = {
        user_id: 'user-123',
        nickname: 'John Doe',
        remark: 'Friend',
        avatar: 'avatar.jpg',
        group_id: 1,
        tags: ['friend', 'work'],
        notes: 'Good friend'
      }

      // æ·»åŠ è”ç³»äºº
      const newContact = await service.addContact(contactData)
      expect(newContact).toBeTruthy()
      expect(newContact.user_id).toBe(contactData.user_id)

      // è·å–è”ç³»äºº
      const getContact = await service.getContact(newContact.id)
      expect(getContact).toBeTruthy()
      expect(getContact.nickname).toBe(contactData.nickname)
    })

    test('åº”è¯¥èƒ½å¤Ÿæ›´æ–°è”ç³»äºº', async () => {
      // å…ˆæ·»åŠ è”ç³»äºº
      const contact = await service.addContact({
        user_id: 'user-456',
        nickname: 'Jane',
        group_id: 1
      })

      // æ›´æ–°è”ç³»äºº
      const updates = {
        nickname: 'Jane Smith',
        remark: 'Colleague'
      }

      const updateResult = await service.updateContact(contact.id, updates)
      expect(updateResult).toBe(true)

      // éªŒè¯æ›´æ–°
      const updatedContact = await service.getContact(contact.id)
      expect(updatedContact.nickname).toBe(updates.nickname)
      expect(updatedContact.remark).toBe(updates.remark)
    })

    test('åº”è¯¥èƒ½å¤Ÿç½®é¡¶è”ç³»äºº', async () => {
      // æ·»åŠ è”ç³»äºº
      const contact = await service.addContact({
        user_id: 'user-789',
        nickname: 'Bob',
        group_id: 1
      })

      // ç½®é¡¶è”ç³»äºº
      const pinResult = await service.pinContact(contact.id, true)
      expect(pinResult).toBe(true)

      // éªŒè¯ç½®é¡¶çŠ¶æ€
      const pinnedContact = await service.getContact(contact.id)
      expect(pinnedContact.is_pinned).toBe(true)
    })
  })
})
```

### 2. é›†æˆæµ‹è¯•

```typescript
// tests/integration/plugin-data-flow.test.ts
import { PluginDataAPI } from '../../src/renderer/src/services/plugin/PluginDataAPI'
import { DataSyncService } from '../../plugins/shared/services/DataSyncService'

describe('æ’ä»¶æ•°æ®æµé›†æˆæµ‹è¯•', () => {
  let contactAPI: PluginDataAPI
  let messageAPI: PluginDataAPI
  let syncService: any

  beforeEach(() => {
    contactAPI = new PluginDataAPI('contact-plugin')
    messageAPI = new PluginDataAPI('message-plugin')
    syncService = new DataSyncService('test-plugin')
  })

  test('è”ç³»äººæ•°æ®åº”è¯¥åœ¨æ’ä»¶é—´åŒæ­¥', async () => {
    // åœ¨è”ç³»äººæ’ä»¶ä¸­æ·»åŠ è”ç³»äºº
    const contactData = {
      user_id: 'sync-test-user',
      nickname: 'Sync Test',
      group_id: 1
    }

    const newContact = await contactAPI.addContact(contactData)
    expect(newContact).toBeTruthy()

    // ç­‰å¾…åŒæ­¥
    await new Promise((resolve) => setTimeout(resolve, 100))

    // åœ¨æ¶ˆæ¯æ’ä»¶ä¸­åº”è¯¥èƒ½è·å–åˆ°è¯¥è”ç³»äºº
    const contacts = await messageAPI.getContacts()
    const syncedContact = contacts.find((c) => c.user_id === contactData.user_id)
    expect(syncedContact).toBeTruthy()
    expect(syncedContact.nickname).toBe(contactData.nickname)
  })

  test('è”ç³»äººæ›´æ–°åº”è¯¥è§¦å‘åŒæ­¥äº‹ä»¶', async () => {
    let syncEventReceived = false
    let syncEventData = null

    // è®¢é˜…åŒæ­¥äº‹ä»¶
    const unsubscribe = syncService.subscribe('contact_updated', (event) => {
      syncEventReceived = true
      syncEventData = event.data
    })

    // æ·»åŠ è”ç³»äºº
    const contact = await contactAPI.addContact({
      user_id: 'event-test-user',
      nickname: 'Event Test',
      group_id: 1
    })

    // æ›´æ–°è”ç³»äºº
    await contactAPI.updateContact(contact.id, {
      nickname: 'Updated Name'
    })

    // ç­‰å¾…äº‹ä»¶å¤„ç†
    await new Promise((resolve) => setTimeout(resolve, 100))

    expect(syncEventReceived).toBe(true)
    expect(syncEventData.nickname).toBe('Updated Name')

    unsubscribe()
  })
})
```

### 3. æ€§èƒ½æµ‹è¯•

```typescript
// tests/performance/data-operations.test.ts
import { PluginDataService } from '../../src/main/services/plugin/PluginDataService'

describe('æ•°æ®æ“ä½œæ€§èƒ½æµ‹è¯•', () => {
  let service: PluginDataService

  beforeEach(async () => {
    service = new PluginDataService()
    await service.initialize()
  })

  test('æ‰¹é‡æ’å…¥è”ç³»äººæ€§èƒ½', async () => {
    const startTime = Date.now()
    const contactCount = 1000

    // æ‰¹é‡æ·»åŠ è”ç³»äºº
    const promises = []
    for (let i = 0; i < contactCount; i++) {
      promises.push(
        service.addContact({
          user_id: `perf-user-${i}`,
          nickname: `User ${i}`,
          group_id: 1
        })
      )
    }

    await Promise.all(promises)

    const endTime = Date.now()
    const duration = endTime - startTime

    console.log(`æ‰¹é‡æ’å…¥ ${contactCount} ä¸ªè”ç³»äººè€—æ—¶: ${duration}ms`)
    expect(duration).toBeLessThan(5000) // åº”è¯¥åœ¨5ç§’å†…å®Œæˆ
  })

  test('å¤§é‡æ•°æ®æŸ¥è¯¢æ€§èƒ½', async () => {
    // å…ˆæ’å…¥å¤§é‡æ•°æ®
    for (let i = 0; i < 5000; i++) {
      await service.addContact({
        user_id: `query-user-${i}`,
        nickname: `Query User ${i}`,
        group_id: Math.floor(i / 100) + 1
      })
    }

    const startTime = Date.now()

    // æ‰§è¡ŒæŸ¥è¯¢
    const contacts = await service.getContacts({
      limit: 100,
      sortBy: 'created_at',
      sortOrder: 'desc'
    })

    const endTime = Date.now()
    const duration = endTime - startTime

    console.log(`æŸ¥è¯¢ 100 ä¸ªè”ç³»äººè€—æ—¶: ${duration}ms`)
    expect(duration).toBeLessThan(100) // åº”è¯¥åœ¨100mså†…å®Œæˆ
    expect(contacts.length).toBe(100)
  })
})
```

## éƒ¨ç½²ä¸Šçº¿

### 1. æ„å»ºé…ç½®

```json
// package.json
{
  "scripts": {
    "build": "npm run build:main && npm run build:renderer && npm run build:plugins",
    "build:main": "tsc -p src/main/tsconfig.json",
    "build:renderer": "vite build src/renderer",
    "build:plugins": "npm run build:contact-plugin && npm run build:message-plugin",
    "build:contact-plugin": "vite build plugins/contact-plugin",
    "build:message-plugin": "vite build plugins/message-plugin",
    "test": "jest",
    "test:unit": "jest tests/unit",
    "test:integration": "jest tests/integration",
    "test:performance": "jest tests/performance",
    "migrate": "ts-node scripts/migrate-plugin-data.ts"
  }
}
```

### 2. å‘å¸ƒæµç¨‹

```bash
# 1. è¿è¡Œæµ‹è¯•
npm run test

# 2. æ„å»ºé¡¹ç›®
npm run build

# 3. æ•°æ®è¿ç§»ï¼ˆé¦–æ¬¡éƒ¨ç½²ï¼‰
npm run migrate

# 4. æ‰“åŒ…åº”ç”¨
npm run dist
```

### 3. ç‰ˆæœ¬å‡çº§

```typescript
// scripts/upgrade-database.ts
import { DatabaseManager } from '../src/main/services/database/Database'

class DatabaseUpgrade {
  private db: DatabaseManager

  constructor() {
    this.db = DatabaseManager.getInstance()
  }

  async checkVersion(): Promise<string> {
    try {
      const result = await this.db
        .prepare(
          `
        SELECT value FROM plugin_configs 
        WHERE plugin_id = 'system' AND key = 'db_version'
      `
        )
        .get()

      return result?.value || '1.0.0'
    } catch {
      return '1.0.0'
    }
  }

  async upgradeToVersion(version: string) {
    const currentVersion = await this.checkVersion()

    if (currentVersion === version) {
      console.log(`æ•°æ®åº“å·²æ˜¯æœ€æ–°ç‰ˆæœ¬: ${version}`)
      return
    }

    console.log(`å‡çº§æ•°æ®åº“ä» ${currentVersion} åˆ° ${version}`)

    // æ ¹æ®ç‰ˆæœ¬æ‰§è¡Œç›¸åº”çš„å‡çº§è„šæœ¬
    switch (version) {
      case '1.1.0':
        await this.upgradeToV1_1_0()
        break
      case '1.2.0':
        await this.upgradeToV1_2_0()
        break
      default:
        throw new Error(`ä¸æ”¯æŒçš„ç‰ˆæœ¬: ${version}`)
    }

    // æ›´æ–°ç‰ˆæœ¬å·
    await this.db
      .prepare(
        `
      INSERT OR REPLACE INTO plugin_configs (plugin_id, key, value, updated_at)
      VALUES ('system', 'db_version', ?, datetime('now'))
    `
      )
      .run(version)

    console.log(`æ•°æ®åº“å‡çº§å®Œæˆ: ${version}`)
  }

  private async upgradeToV1_1_0() {
    // æ·»åŠ æ–°å­—æ®µæˆ–è¡¨
    await this.db.exec(`
      ALTER TABLE contacts ADD COLUMN last_seen_at TEXT;
      ALTER TABLE messages ADD COLUMN edited_at TEXT;
    `)
  }

  private async upgradeToV1_2_0() {
    // æ›´å¤šå‡çº§é€»è¾‘
    await this.db.exec(`
      CREATE INDEX IF NOT EXISTS idx_messages_edited_at ON messages(edited_at);
    `)
  }
}

// è¿è¡Œå‡çº§
if (require.main === module) {
  const upgrade = new DatabaseUpgrade()
  const targetVersion = process.argv[2] || '1.2.0'
  upgrade.upgradeToVersion(targetVersion)
}
```

## ç»´æŠ¤å’Œä¼˜åŒ–

### 1. ç›‘æ§å’Œæ—¥å¿—

```typescript
// src/main/services/monitoring/PluginMonitor.ts
export class PluginMonitor {
  private static instance: PluginMonitor
  private metrics = new Map<string, any>()

  static getInstance() {
    if (!PluginMonitor.instance) {
      PluginMonitor.instance = new PluginMonitor()
    }
    return PluginMonitor.instance
  }

  recordOperation(pluginId: string, operation: string, duration: number) {
    const key = `${pluginId}:${operation}`
    const existing = this.metrics.get(key) || { count: 0, totalTime: 0, avgTime: 0 }

    existing.count++
    existing.totalTime += duration
    existing.avgTime = existing.totalTime / existing.count

    this.metrics.set(key, existing)
  }

  getMetrics() {
    return Object.fromEntries(this.metrics)
  }

  logSlowOperations(threshold: number = 1000) {
    for (const [key, metric] of this.metrics) {
      if (metric.avgTime > threshold) {
        console.warn(`æ…¢æ“ä½œæ£€æµ‹: ${key} å¹³å‡è€—æ—¶ ${metric.avgTime}ms`)
      }
    }
  }
}
```

### 2. æ€§èƒ½ä¼˜åŒ–

```typescript
// src/main/services/optimization/CacheOptimizer.ts
export class CacheOptimizer {
  private cache = new Map<string, { data: any; expiry: number; hits: number }>()
  private maxSize = 1000
  private defaultTTL = 300000 // 5åˆ†é’Ÿ

  set(key: string, data: any, ttl: number = this.defaultTTL) {
    // å¦‚æœç¼“å­˜å·²æ»¡ï¼Œæ¸…ç†æœ€å°‘ä½¿ç”¨çš„é¡¹
    if (this.cache.size >= this.maxSize) {
      this.evictLeastUsed()
    }

    this.cache.set(key, {
      data,
      expiry: Date.now() + ttl,
      hits: 0
    })
  }

  get(key: string) {
    const item = this.cache.get(key)
    if (!item) return null

    if (Date.now() > item.expiry) {
      this.cache.delete(key)
      return null
    }

    item.hits++
    return item.data
  }

  private evictLeastUsed() {
    let leastUsedKey = ''
    let leastHits = Infinity

    for (const [key, item] of this.cache) {
      if (item.hits < leastHits) {
        leastHits = item.hits
        leastUsedKey = key
      }
    }

    if (leastUsedKey) {
      this.cache.delete(leastUsedKey)
    }
  }

  getStats() {
    return {
      size: this.cache.size,
      maxSize: this.maxSize,
      hitRate: this.calculateHitRate()
    }
  }

  private calculateHitRate(): number {
    let totalHits = 0
    let totalRequests = 0

    for (const item of this.cache.values()) {
      totalHits += item.hits
      totalRequests += item.hits + 1 // +1 for the initial miss
    }

    return totalRequests > 0 ? totalHits / totalRequests : 0
  }
}
```

## å¸¸è§é—®é¢˜

### Q1: æ’ä»¶æ•°æ®åŒæ­¥å»¶è¿Ÿæ€ä¹ˆåŠï¼Ÿ

**A**:

1. æ£€æŸ¥äº‹ä»¶å‘å¸ƒ/è®¢é˜…æœºåˆ¶æ˜¯å¦æ­£å¸¸
2. ä¼˜åŒ–æ•°æ®åŒæ­¥é¢‘ç‡
3. ä½¿ç”¨æ‰¹é‡åŒæ­¥å‡å°‘é¢‘ç¹æ›´æ–°
4. æ£€æŸ¥ç½‘ç»œå’Œæ•°æ®åº“æ€§èƒ½

### Q2: æ•°æ®åº“æ€§èƒ½é—®é¢˜å¦‚ä½•è§£å†³ï¼Ÿ

**A**:

1. æ·»åŠ é€‚å½“çš„ç´¢å¼•
2. ä½¿ç”¨åˆ†é¡µæŸ¥è¯¢
3. å®ç°æ•°æ®ç¼“å­˜
4. å®šæœŸæ¸…ç†å†å²æ•°æ®
5. ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± 

### Q3: æ’ä»¶æƒé™æ§åˆ¶å¦‚ä½•é…ç½®ï¼Ÿ

**A**:

1. åœ¨ `plugin_permissions` è¡¨ä¸­é…ç½®æƒé™
2. ä½¿ç”¨ `PluginPermissionManager` æ£€æŸ¥æƒé™
3. å®ç°ç»†ç²’åº¦çš„æƒé™æ§åˆ¶
4. å®šæœŸå®¡è®¡æƒé™ä½¿ç”¨æƒ…å†µ

### Q4: å¦‚ä½•å¤„ç†æ•°æ®å†²çªï¼Ÿ

**A**:

1. ä½¿ç”¨æ—¶é—´æˆ³è¿›è¡Œå†²çªæ£€æµ‹
2. å®ç°æ•°æ®åˆå¹¶ç­–ç•¥
3. æä¾›ç”¨æˆ·é€‰æ‹©ç•Œé¢
4. è®°å½•å†²çªæ—¥å¿—ä¾¿äºåˆ†æ

### Q5: æ’ä»¶å‡çº§æ—¶å¦‚ä½•ä¿è¯æ•°æ®å…¼å®¹æ€§ï¼Ÿ

**A**:

1. ä½¿ç”¨æ•°æ®åº“ç‰ˆæœ¬æ§åˆ¶
2. ç¼–å†™æ•°æ®è¿ç§»è„šæœ¬
3. ä¿æŒå‘åå…¼å®¹
4. æä¾›æ•°æ®å¤‡ä»½å’Œæ¢å¤åŠŸèƒ½

## æ€»ç»“

æœ¬å®ç°æŒ‡å—æä¾›äº†å®Œæ•´çš„æ’ä»¶æ•°æ®å­˜å‚¨æ–¹æ¡ˆï¼ŒåŒ…æ‹¬ï¼š

1. **å®Œæ•´çš„æŠ€æœ¯æ¶æ„**ï¼šä»æ•°æ®åº“åˆ°å‰ç«¯çš„å®Œæ•´æŠ€æœ¯æ ˆ
2. **è¯¦ç»†çš„å®ç°æ­¥éª¤**ï¼šåˆ†é˜¶æ®µçš„å®ç°æŒ‡å¯¼
3. **ä¸°å¯Œçš„ä»£ç ç¤ºä¾‹**ï¼šå¯ç›´æ¥ä½¿ç”¨çš„ä»£ç æ¨¡æ¿
4. **å…¨é¢çš„æµ‹è¯•æ–¹æ¡ˆ**ï¼šå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€æ€§èƒ½æµ‹è¯•
5. **å®Œå–„çš„éƒ¨ç½²æµç¨‹**ï¼šä»æ„å»ºåˆ°ä¸Šçº¿çš„å®Œæ•´æµç¨‹
6. **æŒç»­çš„ç»´æŠ¤ä¼˜åŒ–**ï¼šç›‘æ§ã€ä¼˜åŒ–ã€é—®é¢˜è§£å†³

é€šè¿‡éµå¾ªæœ¬æŒ‡å—ï¼Œå¼€å‘å›¢é˜Ÿå¯ä»¥é«˜æ•ˆåœ°å®ç°æ’ä»¶æ•°æ®å­˜å‚¨æ–¹æ¡ˆï¼Œç¡®ä¿ç³»ç»Ÿçš„ç¨³å®šæ€§ã€æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§ã€‚

### å…³é”®æˆåŠŸå› ç´ 

1. **åˆ†é˜¶æ®µå®æ–½**ï¼šæŒ‰ç…§æ—¢å®šçš„äº”ä¸ªé˜¶æ®µé€æ­¥å®æ–½ï¼Œç¡®ä¿æ¯ä¸ªé˜¶æ®µçš„è´¨é‡
2. **å……åˆ†æµ‹è¯•**ï¼šåœ¨æ¯ä¸ªé˜¶æ®µéƒ½è¿›è¡Œå……åˆ†çš„æµ‹è¯•ï¼ŒåŠæ—©å‘ç°å’Œè§£å†³é—®é¢˜
3. **æ€§èƒ½ç›‘æ§**ï¼šå»ºç«‹å®Œå–„çš„ç›‘æ§ä½“ç³»ï¼ŒæŒç»­ä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½
4. **æ–‡æ¡£ç»´æŠ¤**ï¼šä¿æŒæ–‡æ¡£çš„åŠæ—¶æ›´æ–°ï¼Œä¾¿äºå›¢é˜Ÿåä½œå’ŒçŸ¥è¯†ä¼ æ‰¿
5. **ç”¨æˆ·åé¦ˆ**ï¼šæ”¶é›†ç”¨æˆ·åé¦ˆï¼ŒæŒç»­æ”¹è¿›ç”¨æˆ·ä½“éªŒ

### ä¸‹ä¸€æ­¥è®¡åˆ’

1. **ç«‹å³æ‰§è¡Œ**ï¼š
   - é›†æˆæ•°æ®åº“æ‰©å±•åˆ°ä¸»è¿›ç¨‹
   - æ³¨å†ŒIPCå¤„ç†å™¨
   - è¿è¡Œæ•°æ®è¿ç§»è„šæœ¬

2. **çŸ­æœŸç›®æ ‡ï¼ˆ1-2å‘¨ï¼‰**ï¼š
   - å®Œæˆè”ç³»äººæ’ä»¶é‡æ„
   - å®Œæˆæ¶ˆæ¯æ’ä»¶é‡æ„
   - å®ç°åŸºç¡€çš„æ•°æ®åŒæ­¥

3. **ä¸­æœŸç›®æ ‡ï¼ˆ1ä¸ªæœˆï¼‰**ï¼š
   - å®Œå–„æ‰€æœ‰åŠŸèƒ½ç‰¹æ€§
   - å®Œæˆå…¨é¢æµ‹è¯•
   - ä¼˜åŒ–æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ

4. **é•¿æœŸç›®æ ‡ï¼ˆæŒç»­ï¼‰**ï¼š
   - ç›‘æ§ç³»ç»Ÿè¿è¡ŒçŠ¶å†µ
   - æ”¶é›†ç”¨æˆ·åé¦ˆå¹¶æ”¹è¿›
   - æ‰©å±•æ›´å¤šæ’ä»¶åŠŸèƒ½

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2024å¹´1æœˆ  
**ç»´æŠ¤è€…**: å¼€å‘å›¢é˜Ÿ  
**è”ç³»æ–¹å¼**: dev-team@why-talk.com
